<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<title>Books</title>
<link th:href="@{/webjars/bootstrap/5.3.8/css/bootstrap.min.css}"
	rel="stylesheet" />
<script th:src="@{/webjars/bootstrap/5.3.8/js/bootstrap.bundle.min.js}"
	defer></script>
</head>

<body class="container mt-5">
	<h1 class="mb-4">Books</h1>

	<table class="table table-striped table-hover">
		<thead class="table-dark">
			<tr>
				<td>ID</td>
				<td>isbn</td>
				<td>title</td>
				<td>series</td>
				<td>page count</td>
				<td>price</td>
				<td>buy date</td>
				<td>last read</td>
				<td>author</td>
				<td>press</td>
				<td>type</td>
				<td>genre</td>
			</tr>
		</thead>
		<tbody>
			<tr th:each="e : ${books}">
				<td th:text="${e.id}"></td>
				<td th:text="${e.isbn}"></td>
				<td th:text="${e.title}"></td>
				<td th:text="${e.series}"></td>
				<td th:text="${e.pageCount}"></td>
				<td th:text="${e.price}"></td>
				<td th:text="${#temporals.format(e.buyDate, 'dd.MM.yyyy')}"></td>
				<td th:text="${#temporals.format(e.lastRead, 'dd.MM.yyyy')}"></td>
				<td th:text="${e.author.firstname + ' ' + e.author.lastname}"></td>
				<td th:text="${e.press.name}"></td>
				<td th:text="${e.bookType}"></td>
				<td th:text="${e.bookGenre}"></td>
			</tr>
		</tbody>
	</table>

	<h2 class="mt-5">Add Book</h2>
	<form action="#" th:action="@{/books}" th:object="${book}" method="post" class="mb-5">
		<div class="mb-3">
			<label for="authorId" class="form-label">Author:</label>
			<select class="form-select" name="selectAuthor"
				onchange="updateAuthor(event)" th:field="*{author}">
				<option th:each="a : ${authors}" th:value="${a.id}"
					th:text="${a.firstname + ' ' + a.lastname}"></option>
			</select>
		</div>
		<div class="mb-3">
			<label for="authorId" class="form-label">Press:</label>
			<select class="form-select" name="selectPress"
				onchange="updatePress(event)" th:field="*{press}">
				<option th:each="p : ${presses}" th:value="${p.id}"
					th:text="${p.name}"></option>
			</select>
		</div>
		<div class="mb-3">
			<label for="ISBN" class="form-label">ISBN:</label> <input type="text"
				th:field="*{isbn}" class="form-control" required>
		</div>
		<div class="mb-3">
			<label for="title" class="form-label">Title:</label> <input
				type="text" th:field="*{title}" class="form-control" required>
		</div>
		<div class="mb-3">
			<label for="title" class="form-label">Series:</label> <input
				type="text" th:field="*{series}" class="form-control" required>
		</div>
		<div class="mb-3">
			<label for="authorId" class="form-label">Book Type:</label> <select
				class="form-select" name="selectType" onchange="updateAuthor(event)"
				th:field="*{bookType}">
				<option th:each="a : ${types}" th:value="${a}" th:text="${a}"></option>
			</select>
		</div>
		<div class="mb-3">
			<label for="authorId" class="form-label">Book Genre:</label>
			<select class="form-select" name="selectGenre"
				onchange="updateGenre(event)" th:field="*{bookGenre}">
				<option th:each="p : ${genres}" th:value="${p}"
					th:text="${p}"></option>
			</select>
		</div>
		<div class="mb-3">
			<label for="title" class="form-label">Page Count::</label>
			<input type="number" th:field="*{pageCount}" class="form-control" required>
		</div>
		<div class="mb-3">
			<label for="title" class="form-label">Price:</label>
			<input type="number" step="0.01" th:field="*{price}" class="form-control" required>
		</div>
		<div class="mb-3">
			<label for="title" class="form-label">Buy Date:</label>
			<input type="date" th:field="*{buyDate}" class="form-control" required>
		</div>
		<div class="mb-3">
			<label for="title" class="form-label">Last Read:</label>
			<input type="date" th:field="*{lastRead}" class="form-control" required>
		</div>
		<button type="submit" class="btn btn-primary">Add Book</button>
	</form>
	<a href="/reading-sessions" class="btn btn-secondary">View Reading Sessions</a>
	<a href="/authors" class="btn btn-secondary">View Authors</a>
	<a href="/book-management" class="btn btn-secondary">Back to Dashboard</a>
</body>

</html>